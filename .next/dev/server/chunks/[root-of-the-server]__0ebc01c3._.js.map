{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 56, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Alexander/webmizu/apps/adminFE/app/admin/invoices/mockup/InvoiceTemplate.tsx"],"sourcesContent":["import React from 'react';\r\n\r\n// Define the interface for the dynamic data\r\nexport interface InvoiceData {\r\n  invoiceNo: string;\r\n  amountInWords: string;\r\n  description: string;\r\n  optRow1?: string;\r\n  optRow2?: string;\r\n  optRow3?: string;\r\n  // Footer fields\r\n  footerNote: string;\r\n  paymentDetails: string;\r\n  amountNumeric: string;\r\n  locationDate: string;\r\n  customerNameAddress: string;\r\n}\r\n\r\n// Reusable Component\r\nexport function InvoiceTemplate({ data }: { data: InvoiceData }) {\r\n  const imageBaseUrl = 'https://gdfhhfcdomtpkelvmhui.supabase.co/storage/v1/object/public/invoices-public/templateToclas/';\r\n\r\n  const styles = `\r\n    /* Reset and Global Overrides for #invoice-mockup-root */\r\n    #invoice-mockup-root * {\r\n      box-sizing: border-box;\r\n    }\r\n    \r\n    #invoice-mockup-root {\r\n      line-height: 1;\r\n      color: #1131aa;\r\n      background: white;\r\n      font-size: 16px; \r\n      font-family: TimesNewRoman, 'Times New Roman', Times, Baskerville, Georgia, serif;\r\n      font-size: 3.125rem;\r\n      font-style: normal;\r\n      font-weight: normal;\r\n      letter-spacing: 0;\r\n      text-decoration: none;\r\n      width: 2552px; \r\n      height: 1760px; /* FIXED CANVAA HEIGHT for A4 Landscape approx ratio */\r\n      overflow: hidden; /* STRICTLY PREVENT SPILLOVER */\r\n      margin: 0 auto;\r\n      position: relative;\r\n    }\r\n\r\n    @media print {\r\n      body, html {\r\n        margin: 0;\r\n        padding: 0;\r\n        height: 100%;\r\n        width: 100%;\r\n        overflow: hidden;\r\n      }\r\n      #invoice-mockup-root {\r\n         page-break-inside: avoid;\r\n         page-break-after: avoid;\r\n         page-break-before: avoid;\r\n      }\r\n    }\r\n\r\n    #invoice-mockup-root a { color: inherit; text-decoration: none; }\r\n    #invoice-mockup-root ol, #invoice-mockup-root ul { list-style: none; }\r\n    #invoice-mockup-root table { border-collapse: collapse; border-spacing: 0; }\r\n    #invoice-mockup-root h1, #invoice-mockup-root h2, #invoice-mockup-root h3, \r\n    #invoice-mockup-root h4, #invoice-mockup-root h5, #invoice-mockup-root h6 { font-weight: bold; margin-top: 0; margin-bottom: 0; }\r\n    \r\n    #invoice-mockup-root .group:before,\r\n    #invoice-mockup-root .group:after { content: \" \"; display: table; }\r\n    #invoice-mockup-root .group:after { clear: both; }\r\n    #invoice-mockup-root .group { zoom: 1; }\r\n    \r\n    #invoice-mockup-root embed, #invoice-mockup-root img, #invoice-mockup-root object { max-width: 100%; }\r\n    \r\n    /* Layout Classes */\r\n    #invoice-mockup-root .global_container_ {\r\n      float: none;\r\n      height: 100%; /* Fill the fixed root */\r\n      margin: 0 auto;\r\n      padding: 40px 36px 0; /* REDUCED TOP PADDING TO LIFT CONTENT */\r\n      position: relative;\r\n      width: 2552px;\r\n      background: url(${imageBaseUrl}images/layer_4.png) no-repeat;\r\n      page-break-inside: avoid; /* PREVENT BREAKS */\r\n    }\r\n    #invoice-mockup-root .header {\r\n      left: 66px;\r\n      margin: 0 auto;\r\n      position: relative;\r\n      width: 2330px;\r\n    }\r\n    #invoice-mockup-root .col-3 {\r\n      float: left;\r\n      margin: 15px 0 0;\r\n      position: relative;\r\n      width: 337px;\r\n    }\r\n    #invoice-mockup-root .wrapper-6 {\r\n      height: 307px;\r\n      position: relative;\r\n      width: 337px;\r\n    }\r\n    #invoice-mockup-root .layer-239 { left: 50%; position: absolute; top: 201px; margin-left: -117.5px; }\r\n    #invoice-mockup-root .layer-239-copy { left: 50%; position: absolute; top: 142px; margin-left: -168.5px; }\r\n    #invoice-mockup-root .layer-239-copy-2 { left: 50%; position: absolute; top: 173px; margin-left: -141.5px; }\r\n    #invoice-mockup-root .layer-242 { left: 50%; position: absolute; top: 0; margin-left: -136.5px; }\r\n    \r\n    #invoice-mockup-root .text {\r\n      margin: 1px 119px 0 69px;\r\n      font-size: 3.645833rem;\r\n      line-height: 50px;\r\n      text-align: center;\r\n    }\r\n    #invoice-mockup-root .col-8 {\r\n      float: right;\r\n      position: relative;\r\n      width: 1981px;\r\n    }\r\n    #invoice-mockup-root .text-2 { display: block; margin: 0 0 0 4px; position: relative; }\r\n    #invoice-mockup-root .text-3 {\r\n      margin: 34px 0 0 5px;\r\n      position: relative;\r\n      font-family: 'Segoe UI', Frutiger, 'Frutiger Linotype', 'Dejavu Sans', 'Helvetica Neue', Arial, sans-serif;\r\n      font-weight: bold;\r\n    }\r\n    #invoice-mockup-root .text-4 {\r\n      margin: -4px 0 0 7px;\r\n      position: relative;\r\n      font-family: 'Segoe UI', Frutiger, 'Frutiger Linotype', 'Dejavu Sans', 'Helvetica Neue', Arial, sans-serif;\r\n      font-weight: bold;\r\n    }\r\n    #invoice-mockup-root .row-2 { margin: 10px 0 0; position: relative; }\r\n    #invoice-mockup-root .col-10 { float: left; position: relative; width: 1299px; }\r\n    #invoice-mockup-root .text-5 {\r\n      font-family: 'Segoe UI', Frutiger, 'Frutiger Linotype', 'Dejavu Sans', 'Helvetica Neue', Arial, sans-serif;\r\n      font-size: 2.604167rem;\r\n    }\r\n    #invoice-mockup-root .text-6 {\r\n      margin: 2px 0 0 7px;\r\n      font-family: 'Segoe UI', Frutiger, 'Frutiger Linotype', 'Dejavu Sans', 'Helvetica Neue', Arial, sans-serif;\r\n      font-size: 2.604167rem;\r\n      line-height: 50px;\r\n    }\r\n    #invoice-mockup-root .text-7 {\r\n      margin: 9px 0 0 6px;\r\n      font-family: 'Segoe UI', Frutiger, 'Frutiger Linotype', 'Dejavu Sans', 'Helvetica Neue', Arial, sans-serif;\r\n      font-size: 2.604167rem;\r\n    }\r\n    #invoice-mockup-root .text-8 {\r\n      float: right;\r\n      margin: 163px -2px 0 0;\r\n      width: 404px;\r\n      color: #000000;\r\n      font-weight: bold;\r\n    }\r\n    #invoice-mockup-root .wrapper {\r\n      height: 1290px;\r\n      left: 32.5px;\r\n      margin: 39px auto 0;\r\n      position: relative;\r\n      width: 2415px;\r\n    }\r\n    \r\n    #invoice-mockup-root .col-2 {\r\n      left: 50%;\r\n      min-height: 1284px;\r\n      padding: 225px 67px 71px; /* padding-top 225px, padding-left 67px */\r\n      position: absolute;\r\n      top: 6px;\r\n      width: 2404px;\r\n      background: url(${imageBaseUrl}images/layer_6.jpg) no-repeat;\r\n      margin-left: -1196.5px;\r\n    }\r\n    \r\n    #invoice-mockup-root .text-9 {\r\n      margin: 0 489px;\r\n      color: #000000;\r\n      font-weight: bold;\r\n    }\r\n    \r\n    #invoice-mockup-root .text-10 {\r\n      margin: 99px 0 0 455px; /* relative to text-9 */\r\n      color: #000000;\r\n      font-weight: bold;\r\n      /* Ensure description line height aligns with grid if needed */\r\n      line-height: 1.2;\r\n      max-height: 350px; /* Constrain growth */\r\n      overflow: hidden;  /* Hide overflow */\r\n    }\r\n\r\n    #invoice-mockup-root .text-10-extra {\r\n      /* margins handled by container styles */\r\n      color: #000000;\r\n      font-weight: bold;\r\n      /* Reset line-height to be tighter */\r\n      line-height: 1.2; \r\n      font-size: 3.125rem;\r\n    }\r\n    \r\n    /* Footer styling handled by inline absolute positioning to ensure stability */\r\n    #invoice-mockup-root .text-11,\r\n    #invoice-mockup-root .text-12,\r\n    #invoice-mockup-root .text-13 {\r\n        color: #000000;\r\n        font-weight: bold;\r\n    }\r\n    \r\n    #invoice-mockup-root .text-13 {\r\n      font-size: 3.645833rem;\r\n      font-style: italic;\r\n    }\r\n\r\n    #invoice-mockup-root .text-14 {\r\n      /* positioned by container */\r\n      color: #000000;\r\n      font-weight: bold;\r\n      text-align: right;\r\n    }\r\n    \r\n    #invoice-mockup-root .text-15 {\r\n      color: #000000;\r\n      font-weight: bold;\r\n      text-align: right;\r\n    }\r\n    #invoice-mockup-root .shape-8 {\r\n      height: 5px;\r\n      left: 50%;\r\n      position: absolute;\r\n      top: 79px;\r\n      width: 1840px;\r\n      background: #2168c2;\r\n      margin-left: -673.5px;\r\n    }\r\n  `;\r\n\r\n  return (\r\n    <div style={{ padding: 20 }}>\r\n      {/* Dynamic Style Injection */}\r\n      <style>{styles}</style>\r\n      \r\n      <div id=\"invoice-mockup-root\">\r\n        <div className=\"global_container_\">\r\n          <header className=\"header group\">\r\n            <div className=\"col-3\">\r\n              <div className=\"wrapper-6\">\r\n                <img className=\"layer-239\" src={`${imageBaseUrl}images/layer_239.png`} alt=\"\" width=\"190\" height=\"106\" />\r\n                <img className=\"layer-239-copy\" src={`${imageBaseUrl}images/layer_239_copy.png`} alt=\"\" width=\"194\" height=\"102\" />\r\n                <img className=\"layer-239-copy-2\" src={`${imageBaseUrl}images/layer_239_copy_2.png`} alt=\"\" width=\"194\" height=\"101\" />\r\n                <img className=\"layer-242\" src={`${imageBaseUrl}images/layer_242.png`} alt=\"\" width=\"305\" height=\"213\" />\r\n              </div>\r\n              <p className=\"text\">Mizu<br />Firuta</p>\r\n            </div>\r\n            <div className=\"col-8\">\r\n              <img className=\"text-2\" src={`${imageBaseUrl}images/cv_surya_mizu_firuta_indo.png`} alt=\"CV. SURYA MIZU FIRUTA INDOWATER\" width=\"1583\" height=\"88\" title=\"CV. SURYA MIZU FIRUTA INDOWATER\" />\r\n              <p className=\"text-3\">Spesialist : Solar Water Heater - Water Purifirer - Pompa Air</p>\r\n              <p className=\"text-4\">Pantek Sumur - Bleaching Pipe - Hot &amp; Cold Water Instalation</p>\r\n              <div className=\"row-2 group\">\r\n                <div className=\"col-10\">\r\n                  <p className=\"text-5\">JL Waru Raya Ujung No. 25 A, Kapuk - Jakarta Barat 11720</p>\r\n                  <p className=\"text-6\">\r\n                    Telp : 021 - 54360371, 021 - 29430479, 081584719898, 085287479898<br />\r\n                    082124111778&nbsp;&nbsp;&nbsp;&nbsp;Fax : 021 - 54360371 Website : www.mizufiruta.com\r\n                  </p>\r\n                  <p className=\"text-7\">E-mail : go.mizuindowater@gmail.com, go.mizu9898@gmail.com</p>\r\n                </div>\r\n                <p className=\"text-8\">{data.invoiceNo}</p>\r\n              </div>\r\n            </div>\r\n          </header>\r\n          <div className=\"wrapper\">\r\n            <div className=\"col-2\">\r\n              {/* Customer Name - Absolutely positioned at the top \"Received From\" line */}\r\n              <p className=\"text-15\" style={{ position: 'absolute', top: '10px', left: '522px', width: '1800px', textAlign: 'left', zIndex: 999 }}>{data.customerNameAddress}</p>\r\n\r\n              <p className=\"text-9\">{data.amountInWords}</p>\r\n              \r\n              <p className=\"text-10\">{data.description}</p>\r\n\r\n              {/* Optional Rows - Absolutely positioned to snap to grid lines */}\r\n              {/* Description is within normal flow, but optional rows are fixed overlays */}\r\n              {data.optRow1 && <p className=\"text-10-extra\" style={{ position: 'absolute', top: '430px', left: '522px', whiteSpace: 'nowrap' }}>{data.optRow1}</p>}\r\n              {data.optRow2 && <p className=\"text-10-extra\" style={{ position: 'absolute', top: '500px', left: '522px', whiteSpace: 'nowrap' }}>{data.optRow2}</p>}\r\n              {data.optRow3 && <p className=\"text-10-extra\" style={{ position: 'absolute', top: '570px', left: '522px', whiteSpace: 'nowrap' }}>{data.optRow3}</p>}\r\n\r\n              {/* Anchored Footer Sections - STRICTLY FIXED POSITIONS */}\r\n              <p className=\"text-11\" style={{ position: 'absolute', top: '645px', left: '522px', width: '2000px', whiteSpace: 'nowrap' }}>{data.footerNote}</p>\r\n              \r\n              {/* Payment Details with Overflow Control */}\r\n              <div style={{ position: 'absolute', top: '715px', left: '635px', width: '2000px', maxHeight: '100px', overflow: 'hidden' }}>\r\n                 <p className=\"text-12\" style={{ margin: 0 }}>{data.paymentDetails}</p>\r\n              </div>\r\n              \r\n              {/* Signature and Date Section - Absolutely Positioned */}\r\n              <div style={{ position: 'absolute', top: '850px', right: '120px', textAlign: 'right', zIndex: 254 }}>\r\n                 <p className=\"text-14\">{data.locationDate}</p>\r\n                 <img \r\n                    className=\"layer-292\" \r\n                    src={`${imageBaseUrl}images/layer_292.png`} \r\n                    alt=\"\" \r\n                    width=\"440\" \r\n                    height=\"328\" \r\n                    style={{ \r\n                      display: 'block', \r\n                      margin: '-5px 0 0', \r\n                      position: 'relative', \r\n                      zIndex: 23,\r\n                      printColorAdjust: 'exact',\r\n                      WebkitPrintColorAdjust: 'exact'\r\n                    }} \r\n                 />\r\n              </div>\r\n\r\n               {/* Amount Numeric - Absolutely Positioned at bottom */}\r\n               <p className=\"text-13\" style={{ position: 'absolute', top: '1020px', left: '566px', width: '500px', margin: 0, whiteSpace: 'nowrap' }}>Rp. &nbsp;{data.amountNumeric}</p>\r\n            </div>\r\n            \r\n            <div className=\"shape-8\"></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 699, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Alexander/webmizu/apps/adminFE/app/api/invoice-pdf/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\r\nimport puppeteer from 'puppeteer';\r\nimport { InvoiceTemplate, InvoiceData } from '../../admin/invoices/mockup/InvoiceTemplate';\r\nimport React from 'react';\r\n\r\nexport const runtime = 'nodejs';\r\nexport async function POST(req: NextRequest) {\r\n  try {\r\n    const data: InvoiceData = await req.json();\r\n\r\n    // Render the component to static HTML\r\n    const { renderToStaticMarkup } = await import('react-dom/server');\r\n    const componentHtml = renderToStaticMarkup(\r\n      React.createElement(InvoiceTemplate, { data })\r\n    );\r\n\r\n    // Full HTML document structure\r\n    const html = `\r\n      <!DOCTYPE html>\r\n      <html>\r\n        <head>\r\n          <meta charset=\"utf-8\">\r\n          <style>\r\n             /* Print-specific layout locks */\r\n             @page {\r\n                size: A4 landscape; /* Standard A4 landscape */\r\n                margin: 0;\r\n             }\r\n             body {\r\n                margin: 0;\r\n                padding: 0;\r\n                width: 100%;\r\n                height: 100%;\r\n                overflow: hidden;\r\n                /* Ensure background colors are printed */\r\n                -webkit-print-color-adjust: exact;\r\n                print-color-adjust: exact;\r\n             }\r\n             /* Force specific width to match the template's design logic */\r\n             /* The template uses 2552px width. We need to scale this to fit A4 */\r\n             /* A4 Landscape is approx 297mm x 210mm */\r\n             /* 297mm at 96dpi is ~1123px. */\r\n             /* 2552px is very high res. We will use CSS zoom/transform or Puppeteer scaling */\r\n          </style>\r\n        </head>\r\n        <body>\r\n          ${componentHtml}\r\n        </body>\r\n      </html>\r\n    `;\r\n\r\n    const browser = await puppeteer.launch({\r\n      headless: true,\r\n      args: ['--no-sandbox', '--disable-setuid-sandbox'],\r\n    });\r\n\r\n    const page = await browser.newPage();\r\n    \r\n    // Set viewport to the template's native resolution to ensure correct layout calculation\r\n    await page.setViewport({\r\n      width: 2552, \r\n      height: 1800, // Enough height for the invoice\r\n      deviceScaleFactor: 1,\r\n    });\r\n\r\n    await page.setContent(html, {\r\n      waitUntil: 'networkidle0', // Wait for images to load\r\n    });\r\n\r\n    // Generate PDF\r\n    // We scale the 2552px content down to fit A4 Landscape\r\n    // A4 width (landscape) is appx 11.7 inches. \r\n    // 2552px / 96dpi = 26.58 inches.\r\n    // Scale factor needed: 11.7 / 26.58 = ~0.44\r\n    // However, it's safer to use 'printBackground' and prefer CSS @page size.\r\n    // Let's try fitting it via PDF options safely.\r\n    \r\n    const pdfBuffer = await page.pdf({\r\n      printBackground: true,\r\n      preferCSSPageSize: true, // Respect @page rules\r\n      scale: 0.43, // Tweak scale slightly tighter to ensure fit\r\n      pageRanges: '1', // FORCE SINGLE PAGE\r\n      margin: { top: 0, right: 0, bottom: 0, left: 0 }\r\n    });\r\n\r\n    await browser.close();\r\n\r\n    return new NextResponse(pdfBuffer as any, {\r\n      headers: {\r\n        'Content-Type': 'application/pdf',\r\n        'Content-Disposition': `attachment; filename=\"Invoice_${data.invoiceNo.replace(/[^a-zA-Z0-9]/g, '-')}.pdf\"`,\r\n      },\r\n    });\r\n\r\n  } catch (error) {\r\n    console.error('PDF Generation Error:', error);\r\n    return NextResponse.json({ error: 'Failed to generate PDF' }, { status: 500 });\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;AACA;;;;;;;;;AAEO,MAAM,UAAU;AAChB,eAAe,KAAK,GAAgB;IACzC,IAAI;QACF,MAAM,OAAoB,MAAM,IAAI,IAAI;QAExC,sCAAsC;QACtC,MAAM,EAAE,oBAAoB,EAAE,GAAG;QACjC,MAAM,gBAAgB,mCACpB,qOAAK,CAAC,aAAa,CAAC,8LAAe,EAAE;YAAE;QAAK;QAG9C,+BAA+B;QAC/B,MAAM,OAAO,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UA6BR,EAAE,cAAc;;;IAGtB,CAAC;QAED,MAAM,UAAU,MAAM,6HAAS,CAAC,MAAM,CAAC;YACrC,UAAU;YACV,MAAM;gBAAC;gBAAgB;aAA2B;QACpD;QAEA,MAAM,OAAO,MAAM,QAAQ,OAAO;QAElC,wFAAwF;QACxF,MAAM,KAAK,WAAW,CAAC;YACrB,OAAO;YACP,QAAQ;YACR,mBAAmB;QACrB;QAEA,MAAM,KAAK,UAAU,CAAC,MAAM;YAC1B,WAAW;QACb;QAEA,eAAe;QACf,uDAAuD;QACvD,6CAA6C;QAC7C,iCAAiC;QACjC,4CAA4C;QAC5C,0EAA0E;QAC1E,+CAA+C;QAE/C,MAAM,YAAY,MAAM,KAAK,GAAG,CAAC;YAC/B,iBAAiB;YACjB,mBAAmB;YACnB,OAAO;YACP,YAAY;YACZ,QAAQ;gBAAE,KAAK;gBAAG,OAAO;gBAAG,QAAQ;gBAAG,MAAM;YAAE;QACjD;QAEA,MAAM,QAAQ,KAAK;QAEnB,OAAO,IAAI,mKAAY,CAAC,WAAkB;YACxC,SAAS;gBACP,gBAAgB;gBAChB,uBAAuB,CAAC,8BAA8B,EAAE,KAAK,SAAS,CAAC,OAAO,CAAC,iBAAiB,KAAK,KAAK,CAAC;YAC7G;QACF;IAEF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,yBAAyB;QACvC,OAAO,mKAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAyB,GAAG;YAAE,QAAQ;QAAI;IAC9E;AACF"}}]
}