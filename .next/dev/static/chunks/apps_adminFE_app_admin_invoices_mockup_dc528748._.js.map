{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Alexander/webmizu/apps/adminFE/app/admin/invoices/mockup/InvoiceTemplate.tsx"],"sourcesContent":["import React from 'react';\r\n\r\n// Define the interface for the dynamic data\r\nexport interface InvoiceData {\r\n  invoiceNo: string;\r\n  amountInWords: string;\r\n  description: string;\r\n  optRow1?: string;\r\n  optRow2?: string;\r\n  optRow3?: string;\r\n  // Footer fields\r\n  footerNote: string;\r\n  paymentDetails: string;\r\n  amountNumeric: string;\r\n  locationDate: string;\r\n  customerNameAddress: string;\r\n}\r\n\r\n// Reusable Component\r\nexport function InvoiceTemplate({ data }: { data: InvoiceData }) {\r\n  const imageBaseUrl = 'https://gdfhhfcdomtpkelvmhui.supabase.co/storage/v1/object/public/invoices-public/templateToclas/';\r\n\r\n  const styles = `\r\n    /* Reset and Global Overrides for #invoice-mockup-root */\r\n    #invoice-mockup-root * {\r\n      box-sizing: border-box;\r\n    }\r\n    \r\n    #invoice-mockup-root {\r\n      line-height: 1;\r\n      color: #1131aa;\r\n      background: white;\r\n      font-size: 16px; \r\n      font-family: TimesNewRoman, 'Times New Roman', Times, Baskerville, Georgia, serif;\r\n      font-size: 3.125rem;\r\n      font-style: normal;\r\n      font-weight: normal;\r\n      letter-spacing: 0;\r\n      text-decoration: none;\r\n      width: 2552px; \r\n      height: 1760px; /* FIXED CANVAA HEIGHT for A4 Landscape approx ratio */\r\n      overflow: hidden; /* STRICTLY PREVENT SPILLOVER */\r\n      margin: 0 auto;\r\n      position: relative;\r\n    }\r\n\r\n    @media print {\r\n      body, html {\r\n        margin: 0;\r\n        padding: 0;\r\n        height: 100%;\r\n        width: 100%;\r\n        overflow: hidden;\r\n      }\r\n      #invoice-mockup-root {\r\n         page-break-inside: avoid;\r\n         page-break-after: avoid;\r\n         page-break-before: avoid;\r\n      }\r\n    }\r\n\r\n    #invoice-mockup-root a { color: inherit; text-decoration: none; }\r\n    #invoice-mockup-root ol, #invoice-mockup-root ul { list-style: none; }\r\n    #invoice-mockup-root table { border-collapse: collapse; border-spacing: 0; }\r\n    #invoice-mockup-root h1, #invoice-mockup-root h2, #invoice-mockup-root h3, \r\n    #invoice-mockup-root h4, #invoice-mockup-root h5, #invoice-mockup-root h6 { font-weight: bold; margin-top: 0; margin-bottom: 0; }\r\n    \r\n    #invoice-mockup-root .group:before,\r\n    #invoice-mockup-root .group:after { content: \" \"; display: table; }\r\n    #invoice-mockup-root .group:after { clear: both; }\r\n    #invoice-mockup-root .group { zoom: 1; }\r\n    \r\n    #invoice-mockup-root embed, #invoice-mockup-root img, #invoice-mockup-root object { max-width: 100%; }\r\n    \r\n    /* Layout Classes */\r\n    #invoice-mockup-root .global_container_ {\r\n      float: none;\r\n      height: 100%; /* Fill the fixed root */\r\n      margin: 0 auto;\r\n      padding: 40px 36px 0; /* REDUCED TOP PADDING TO LIFT CONTENT */\r\n      position: relative;\r\n      width: 2552px;\r\n      background: url(${imageBaseUrl}images/layer_4.png) no-repeat;\r\n      page-break-inside: avoid; /* PREVENT BREAKS */\r\n    }\r\n    #invoice-mockup-root .header {\r\n      left: 66px;\r\n      margin: 0 auto;\r\n      position: relative;\r\n      width: 2330px;\r\n    }\r\n    #invoice-mockup-root .col-3 {\r\n      float: left;\r\n      margin: 15px 0 0;\r\n      position: relative;\r\n      width: 337px;\r\n    }\r\n    #invoice-mockup-root .wrapper-6 {\r\n      height: 307px;\r\n      position: relative;\r\n      width: 337px;\r\n    }\r\n    #invoice-mockup-root .layer-239 { left: 50%; position: absolute; top: 201px; margin-left: -117.5px; }\r\n    #invoice-mockup-root .layer-239-copy { left: 50%; position: absolute; top: 142px; margin-left: -168.5px; }\r\n    #invoice-mockup-root .layer-239-copy-2 { left: 50%; position: absolute; top: 173px; margin-left: -141.5px; }\r\n    #invoice-mockup-root .layer-242 { left: 50%; position: absolute; top: 0; margin-left: -136.5px; }\r\n    \r\n    #invoice-mockup-root .text {\r\n      margin: 1px 119px 0 69px;\r\n      font-size: 3.645833rem;\r\n      line-height: 50px;\r\n      text-align: center;\r\n    }\r\n    #invoice-mockup-root .col-8 {\r\n      float: right;\r\n      position: relative;\r\n      width: 1981px;\r\n    }\r\n    #invoice-mockup-root .text-2 { display: block; margin: 0 0 0 4px; position: relative; }\r\n    #invoice-mockup-root .text-3 {\r\n      margin: 34px 0 0 5px;\r\n      position: relative;\r\n      font-family: 'Segoe UI', Frutiger, 'Frutiger Linotype', 'Dejavu Sans', 'Helvetica Neue', Arial, sans-serif;\r\n      font-weight: bold;\r\n    }\r\n    #invoice-mockup-root .text-4 {\r\n      margin: -4px 0 0 7px;\r\n      position: relative;\r\n      font-family: 'Segoe UI', Frutiger, 'Frutiger Linotype', 'Dejavu Sans', 'Helvetica Neue', Arial, sans-serif;\r\n      font-weight: bold;\r\n    }\r\n    #invoice-mockup-root .row-2 { margin: 10px 0 0; position: relative; }\r\n    #invoice-mockup-root .col-10 { float: left; position: relative; width: 1299px; }\r\n    #invoice-mockup-root .text-5 {\r\n      font-family: 'Segoe UI', Frutiger, 'Frutiger Linotype', 'Dejavu Sans', 'Helvetica Neue', Arial, sans-serif;\r\n      font-size: 2.604167rem;\r\n    }\r\n    #invoice-mockup-root .text-6 {\r\n      margin: 2px 0 0 7px;\r\n      font-family: 'Segoe UI', Frutiger, 'Frutiger Linotype', 'Dejavu Sans', 'Helvetica Neue', Arial, sans-serif;\r\n      font-size: 2.604167rem;\r\n      line-height: 50px;\r\n    }\r\n    #invoice-mockup-root .text-7 {\r\n      margin: 9px 0 0 6px;\r\n      font-family: 'Segoe UI', Frutiger, 'Frutiger Linotype', 'Dejavu Sans', 'Helvetica Neue', Arial, sans-serif;\r\n      font-size: 2.604167rem;\r\n    }\r\n    #invoice-mockup-root .text-8 {\r\n      float: right;\r\n      margin: 163px -2px 0 0;\r\n      width: 404px;\r\n      color: #000000;\r\n      font-weight: bold;\r\n    }\r\n    #invoice-mockup-root .wrapper {\r\n      height: 1290px;\r\n      left: 32.5px;\r\n      margin: 39px auto 0;\r\n      position: relative;\r\n      width: 2415px;\r\n    }\r\n    \r\n    #invoice-mockup-root .col-2 {\r\n      left: 50%;\r\n      min-height: 1284px;\r\n      padding: 225px 67px 71px; /* padding-top 225px, padding-left 67px */\r\n      position: absolute;\r\n      top: 6px;\r\n      width: 2404px;\r\n      background: url(${imageBaseUrl}images/layer_6.jpg) no-repeat;\r\n      margin-left: -1196.5px;\r\n    }\r\n    \r\n    #invoice-mockup-root .text-9 {\r\n      margin: 0 489px;\r\n      color: #000000;\r\n      font-weight: bold;\r\n    }\r\n    \r\n    #invoice-mockup-root .text-10 {\r\n      margin: 99px 0 0 455px; /* relative to text-9 */\r\n      color: #000000;\r\n      font-weight: bold;\r\n      /* Ensure description line height aligns with grid if needed */\r\n      line-height: 1.2;\r\n      max-height: 350px; /* Constrain growth */\r\n      overflow: hidden;  /* Hide overflow */\r\n    }\r\n\r\n    #invoice-mockup-root .text-10-extra {\r\n      /* margins handled by container styles */\r\n      color: #000000;\r\n      font-weight: bold;\r\n      /* Reset line-height to be tighter */\r\n      line-height: 1.2; \r\n      font-size: 3.125rem;\r\n    }\r\n    \r\n    /* Footer styling handled by inline absolute positioning to ensure stability */\r\n    #invoice-mockup-root .text-11,\r\n    #invoice-mockup-root .text-12,\r\n    #invoice-mockup-root .text-13 {\r\n        color: #000000;\r\n        font-weight: bold;\r\n    }\r\n    \r\n    #invoice-mockup-root .text-13 {\r\n      font-size: 3.645833rem;\r\n      font-style: italic;\r\n    }\r\n\r\n    #invoice-mockup-root .text-14 {\r\n      /* positioned by container */\r\n      color: #000000;\r\n      font-weight: bold;\r\n      text-align: right;\r\n    }\r\n    \r\n    #invoice-mockup-root .text-15 {\r\n      color: #000000;\r\n      font-weight: bold;\r\n      text-align: right;\r\n    }\r\n    #invoice-mockup-root .shape-8 {\r\n      height: 5px;\r\n      left: 50%;\r\n      position: absolute;\r\n      top: 79px;\r\n      width: 1840px;\r\n      background: #2168c2;\r\n      margin-left: -673.5px;\r\n    }\r\n  `;\r\n\r\n  return (\r\n    <div style={{ padding: 20 }}>\r\n      {/* Dynamic Style Injection */}\r\n      <style>{styles}</style>\r\n      \r\n      <div id=\"invoice-mockup-root\">\r\n        <div className=\"global_container_\">\r\n          <header className=\"header group\">\r\n            <div className=\"col-3\">\r\n              <div className=\"wrapper-6\">\r\n                <img className=\"layer-239\" src={`${imageBaseUrl}images/layer_239.png`} alt=\"\" width=\"190\" height=\"106\" />\r\n                <img className=\"layer-239-copy\" src={`${imageBaseUrl}images/layer_239_copy.png`} alt=\"\" width=\"194\" height=\"102\" />\r\n                <img className=\"layer-239-copy-2\" src={`${imageBaseUrl}images/layer_239_copy_2.png`} alt=\"\" width=\"194\" height=\"101\" />\r\n                <img className=\"layer-242\" src={`${imageBaseUrl}images/layer_242.png`} alt=\"\" width=\"305\" height=\"213\" />\r\n              </div>\r\n              <p className=\"text\">Mizu<br />Firuta</p>\r\n            </div>\r\n            <div className=\"col-8\">\r\n              <img className=\"text-2\" src={`${imageBaseUrl}images/cv_surya_mizu_firuta_indo.png`} alt=\"CV. SURYA MIZU FIRUTA INDOWATER\" width=\"1583\" height=\"88\" title=\"CV. SURYA MIZU FIRUTA INDOWATER\" />\r\n              <p className=\"text-3\">Spesialist : Solar Water Heater - Water Purifirer - Pompa Air</p>\r\n              <p className=\"text-4\">Pantek Sumur - Bleaching Pipe - Hot &amp; Cold Water Instalation</p>\r\n              <div className=\"row-2 group\">\r\n                <div className=\"col-10\">\r\n                  <p className=\"text-5\">JL Waru Raya Ujung No. 25 A, Kapuk - Jakarta Barat 11720</p>\r\n                  <p className=\"text-6\">\r\n                    Telp : 021 - 54360371, 021 - 29430479, 081584719898, 085287479898<br />\r\n                    082124111778&nbsp;&nbsp;&nbsp;&nbsp;Fax : 021 - 54360371 Website : www.mizufiruta.com\r\n                  </p>\r\n                  <p className=\"text-7\">E-mail : go.mizuindowater@gmail.com, go.mizu9898@gmail.com</p>\r\n                </div>\r\n                <p className=\"text-8\">{data.invoiceNo}</p>\r\n              </div>\r\n            </div>\r\n          </header>\r\n          <div className=\"wrapper\">\r\n            <div className=\"col-2\">\r\n              {/* Customer Name - Absolutely positioned at the top \"Received From\" line */}\r\n              <p className=\"text-15\" style={{ position: 'absolute', top: '10px', left: '522px', width: '1800px', textAlign: 'left', zIndex: 999 }}>{data.customerNameAddress}</p>\r\n\r\n              <p className=\"text-9\">{data.amountInWords}</p>\r\n              \r\n              <p className=\"text-10\">{data.description}</p>\r\n\r\n              {/* Optional Rows - Absolutely positioned to snap to grid lines */}\r\n              {/* Description is within normal flow, but optional rows are fixed overlays */}\r\n              {data.optRow1 && <p className=\"text-10-extra\" style={{ position: 'absolute', top: '430px', left: '522px', whiteSpace: 'nowrap' }}>{data.optRow1}</p>}\r\n              {data.optRow2 && <p className=\"text-10-extra\" style={{ position: 'absolute', top: '500px', left: '522px', whiteSpace: 'nowrap' }}>{data.optRow2}</p>}\r\n              {data.optRow3 && <p className=\"text-10-extra\" style={{ position: 'absolute', top: '570px', left: '522px', whiteSpace: 'nowrap' }}>{data.optRow3}</p>}\r\n\r\n              {/* Anchored Footer Sections - STRICTLY FIXED POSITIONS */}\r\n              <p className=\"text-11\" style={{ position: 'absolute', top: '645px', left: '522px', width: '2000px', whiteSpace: 'nowrap' }}>{data.footerNote}</p>\r\n              \r\n              {/* Payment Details with Overflow Control */}\r\n              <div style={{ position: 'absolute', top: '715px', left: '635px', width: '2000px', maxHeight: '100px', overflow: 'hidden' }}>\r\n                 <p className=\"text-12\" style={{ margin: 0 }}>{data.paymentDetails}</p>\r\n              </div>\r\n              \r\n              {/* Signature and Date Section - Absolutely Positioned */}\r\n              <div style={{ position: 'absolute', top: '850px', right: '120px', textAlign: 'right', zIndex: 254 }}>\r\n                 <p className=\"text-14\">{data.locationDate}</p>\r\n                 <img \r\n                    className=\"layer-292\" \r\n                    src={`${imageBaseUrl}images/layer_292.png`} \r\n                    alt=\"\" \r\n                    width=\"440\" \r\n                    height=\"328\" \r\n                    style={{ \r\n                      display: 'block', \r\n                      margin: '-5px 0 0', \r\n                      position: 'relative', \r\n                      zIndex: 23,\r\n                      printColorAdjust: 'exact',\r\n                      WebkitPrintColorAdjust: 'exact'\r\n                    }} \r\n                 />\r\n              </div>\r\n\r\n               {/* Amount Numeric - Absolutely Positioned at bottom */}\r\n               <p className=\"text-13\" style={{ position: 'absolute', top: '1020px', left: '566px', width: '500px', margin: 0, whiteSpace: 'nowrap' }}>Rp. &nbsp;{data.amountNumeric}</p>\r\n            </div>\r\n            \r\n            <div className=\"shape-8\"></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 651, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Alexander/webmizu/apps/adminFE/app/admin/invoices/mockup/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React from 'react';\r\nimport { InvoiceTemplate, InvoiceData } from './InvoiceTemplate';\r\n\r\n// Page Component\r\nexport default function MockupInvoicePage() {\r\n  const [isFormOpen, setIsFormOpen] = React.useState(true);\r\n  const [data, setData] = React.useState<InvoiceData>({\r\n    invoiceNo: '0852/SMFI/XII/25',\r\n    amountInWords: 'Tiga Juta Rupiah',\r\n    description: 'Pelunasan Ganti 1 (satu) Unit Catridge Filter air Toclas TW 200 / 1 Tbg',\r\n    optRow1: 'row 2',\r\n    optRow2: 'row 3',\r\n    optRow3: 'row 4',\r\n    footerNote: 'Ket: Harga Sudah Termasuk Ongkos Kerja Team Teknisi di Lapangan',\r\n    paymentDetails: 'Transfer Rekening BCA : 6275256998 - CV Surya Mizu Firuta Indowater',\r\n    amountNumeric: '5.000.000,-',\r\n    locationDate: 'Jakarta, 13 Desember 2025',\r\n    customerNameAddress: 'Mr Jiye Lim / Amala 2508 Apartemen Pondok Indah Residence - Jakarta Selatan'\r\n  });\r\n\r\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\r\n    const { name, value } = e.target;\r\n    setData(prev => ({ ...prev, [name]: value }));\r\n  };\r\n\r\n  const handleExportPDF = async () => {\r\n    try {\r\n      const response = await fetch('/api/invoice-pdf', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify(data),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error('Failed to generate PDF');\r\n      }\r\n\r\n      const blob = await response.blob();\r\n      const url = window.URL.createObjectURL(blob);\r\n      const a = document.createElement('a');\r\n      a.href = url;\r\n      a.download = `Invoice_${data.invoiceNo.replace(/[^a-zA-Z0-9]/g, '-')}.pdf`;\r\n      document.body.appendChild(a);\r\n      a.click();\r\n      window.URL.revokeObjectURL(url); // Clean up\r\n      document.body.removeChild(a);\r\n    } catch (err) {\r\n      console.error('PDF Export Error:', err);\r\n      alert('Failed to export PDF. Check console.');\r\n    }\r\n  };\r\n\r\n  // Scale calculation for \"Fit to Screen\"\r\n  const previewContainerRef = React.useRef<HTMLDivElement>(null);\r\n  const [scale, setScale] = React.useState(0.4);\r\n\r\n  React.useLayoutEffect(() => {\r\n    if (!previewContainerRef.current) return;\r\n\r\n    const observer = new ResizeObserver((entries) => {\r\n      for (const entry of entries) {\r\n        // Use contentRect for precise content box measurement\r\n        const containerWidth = entry.contentRect.width;\r\n        // Invoice width is 2552px. Add some padding (e.g. 20px)\r\n        const newScale = Math.min((containerWidth - 20) / 2552, 1);\r\n        setScale(newScale);\r\n      }\r\n    });\r\n\r\n    observer.observe(previewContainerRef.current);\r\n\r\n    return () => {\r\n      observer.disconnect();\r\n    };\r\n  }, []); // Empty dependency array as observer handles changes\r\n\r\n  return (\r\n    <div style={{ display: 'flex', height: 'calc(100vh - 64px)', width: '100vw', overflow: 'hidden', background: '#f0f0f0', position: 'relative' }}>\r\n      {/* Toggle Button - Show only when closed */}\r\n      {!isFormOpen && (\r\n        <button \r\n          onClick={() => setIsFormOpen(true)}\r\n          style={{\r\n            position: 'fixed', // Use fixed to float above everything including scroll\r\n            bottom: '30px',\r\n            right: '30px',\r\n            zIndex: 1000,\r\n            background: '#1131aa',\r\n            color: 'white',\r\n            border: 'none',\r\n            borderRadius: '50px', // Pill shape or circle\r\n            padding: '12px 24px',\r\n            cursor: 'pointer',\r\n            boxShadow: '0 4px 12px rgba(0,0,0,0.3)',\r\n            fontWeight: 'bold',\r\n            fontSize: '1rem',\r\n            opacity: 0.9\r\n          }}\r\n        >\r\n          ✎ Edit Invoice\r\n        </button>\r\n      )}\r\n\r\n      {/* Editor Panel */}\r\n      <div style={{ \r\n        width: isFormOpen ? '400px' : '0px', \r\n        padding: isFormOpen ? '20px' : '0px', \r\n        background: 'white', \r\n        borderRight: '1px solid #ddd', \r\n        overflowY: 'auto',\r\n        transition: 'width 0.3s ease, padding 0.3s ease',\r\n        overflowX: 'hidden',\r\n        whiteSpace: 'nowrap',\r\n        flexShrink: 0 // Prevent shrinking\r\n      }}>\r\n        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '20px' }}>\r\n             <div style={{ display: 'flex', alignItems: 'center' }}>\r\n               <button \r\n                 onClick={() => setIsFormOpen(false)}\r\n                 style={{\r\n                   background: 'none',\r\n                   border: 'none',\r\n                   cursor: 'pointer',\r\n                   fontSize: '1.2rem',\r\n                   marginRight: '10px',\r\n                   padding: '5px'\r\n                 }}\r\n               >\r\n                 ◄\r\n               </button>\r\n               <h2 style={{ fontSize: '1.25rem', fontWeight: 'bold', margin: 0 }}>Invoice Editor</h2>\r\n             </div>\r\n             <button\r\n               onClick={handleExportPDF}\r\n               style={{\r\n                 padding: '8px 16px',\r\n                 backgroundColor: '#28a745',\r\n                 color: 'white',\r\n                 border: 'none',\r\n                 borderRadius: '4px',\r\n                 cursor: 'pointer',\r\n                 fontWeight: 'bold',\r\n                 fontSize: '0.875rem'\r\n               }}\r\n             >\r\n               Export\r\n             </button>\r\n        </div>\r\n        \r\n        <div style={{ display: 'flex', flexDirection: 'column', gap: '15px' }}>\r\n          <div>\r\n            <label style={{ display: 'block', marginBottom: '5px', fontSize: '0.875rem', fontWeight: 500 }}>Invoice Number</label>\r\n            <input \r\n              type=\"text\" \r\n              name=\"invoiceNo\"\r\n              value={data.invoiceNo}\r\n              onChange={handleChange}\r\n              style={{ width: '100%', padding: '8px', border: '1px solid #ccc', borderRadius: '4px' }}\r\n            />\r\n          </div>\r\n          <div>\r\n            <label style={{ display: 'block', marginBottom: '5px', fontSize: '0.875rem', fontWeight: 500 }}>Amount (Words)</label>\r\n            <input \r\n              type=\"text\" \r\n              name=\"amountInWords\"\r\n              value={data.amountInWords}\r\n              onChange={handleChange}\r\n              style={{ width: '100%', padding: '8px', border: '1px solid #ccc', borderRadius: '4px' }}\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label style={{ display: 'block', marginBottom: '5px', fontSize: '0.875rem', fontWeight: 500 }}>Description</label>\r\n            <textarea \r\n              name=\"description\"\r\n              value={data.description}\r\n              onChange={handleChange}\r\n              rows={3}\r\n              style={{ width: '100%', padding: '8px', border: '1px solid #ccc', borderRadius: '4px' }}\r\n            />\r\n          </div>\r\n\r\n          {/* Optional Rows */}\r\n          <div>\r\n            <label style={{ display: 'block', marginBottom: '5px', fontSize: '0.875rem', fontWeight: 500 }}>Optional Row 1</label>\r\n            <input \r\n              type=\"text\" \r\n              name=\"optRow1\"\r\n              value={data.optRow1}\r\n              onChange={handleChange}\r\n              style={{ width: '100%', padding: '8px', border: '1px solid #ccc', borderRadius: '4px' }}\r\n            />\r\n          </div>\r\n          <div>\r\n            <label style={{ display: 'block', marginBottom: '5px', fontSize: '0.875rem', fontWeight: 500 }}>Optional Row 2</label>\r\n            <input \r\n              type=\"text\" \r\n              name=\"optRow2\"\r\n              value={data.optRow2}\r\n              onChange={handleChange}\r\n              style={{ width: '100%', padding: '8px', border: '1px solid #ccc', borderRadius: '4px' }}\r\n            />\r\n          </div>\r\n          <div>\r\n            <label style={{ display: 'block', marginBottom: '5px', fontSize: '0.875rem', fontWeight: 500 }}>Optional Row 3</label>\r\n            <input \r\n              type=\"text\" \r\n              name=\"optRow3\"\r\n              value={data.optRow3}\r\n              onChange={handleChange}\r\n              style={{ width: '100%', padding: '8px', border: '1px solid #ccc', borderRadius: '4px' }}\r\n            />\r\n          </div>\r\n\r\n          {/* New Footer Fields */}\r\n          <div>\r\n            <label style={{ display: 'block', marginBottom: '5px', fontSize: '0.875rem', fontWeight: 500 }}>Note (Ket)</label>\r\n            <textarea \r\n              name=\"footerNote\"\r\n              value={data.footerNote}\r\n              onChange={handleChange}\r\n              rows={2}\r\n              style={{ width: '100%', padding: '8px', border: '1px solid #ccc', borderRadius: '4px' }}\r\n            />\r\n          </div>\r\n          <div>\r\n            <label style={{ display: 'block', marginBottom: '5px', fontSize: '0.875rem', fontWeight: 500 }}>Payment Details</label>\r\n            <textarea \r\n              name=\"paymentDetails\"\r\n              value={data.paymentDetails}\r\n              onChange={handleChange}\r\n              rows={2}\r\n              style={{ width: '100%', padding: '8px', border: '1px solid #ccc', borderRadius: '4px' }}\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label style={{ display: 'block', marginBottom: '5px', fontSize: '0.875rem', fontWeight: 500 }}>Amount (Numeric)</label>\r\n            <input \r\n              type=\"text\" \r\n              name=\"amountNumeric\"\r\n              value={data.amountNumeric}\r\n              onChange={handleChange}\r\n              style={{ width: '100%', padding: '8px', border: '1px solid #ccc', borderRadius: '4px' }}\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label style={{ display: 'block', marginBottom: '5px', fontSize: '0.875rem', fontWeight: 500 }}>Location & Date</label>\r\n            <input \r\n              type=\"text\" \r\n              name=\"locationDate\"\r\n              value={data.locationDate}\r\n              onChange={handleChange}\r\n              style={{ width: '100%', padding: '20px', border: '1px solid #ccc', borderRadius: '2px' }}\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label style={{ display: 'block', marginBottom: '5px', fontSize: '0.875rem', fontWeight: 500 }}>Customer Name & Address</label>\r\n            <textarea \r\n              name=\"customerNameAddress\"\r\n              value={data.customerNameAddress}\r\n              onChange={handleChange}\r\n              rows={3}\r\n              style={{ width: '100%', padding: '8px', border: '1px solid #ccc', borderRadius: '4px' }}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Preview Panel */}\r\n      <div \r\n        ref={previewContainerRef}\r\n        style={{ flex: 1, minWidth: 0, overflow: 'hidden', display: 'flex', justifyContent: 'center', background: '#e5e5e5', position: 'relative' }}\r\n      >\r\n        <div \r\n          style={{ \r\n            transform: `scale(${scale})`, \r\n            transformOrigin: 'top center',\r\n            marginTop: '20px',\r\n            marginBottom: '20px',\r\n            height: '1760px', /* Matches InvoiceTemplate fixed height */\r\n            width: '2552px',\r\n            boxShadow: '0 0 20px rgba(0,0,0,0.1)' \r\n          }}\r\n        >\r\n          <InvoiceTemplate data={data} />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}